# TODO: psychologist_AI

## 1. Инфраструктура и настройка окружения
- [x] Создать Docker Compose с контейнерами: php-fpm, nginx, postgres
- [x] Настроить Dockerfile для PHP 8.2+ с необходимыми расширениями
- [x] Установить Symfony (последняя версия)
- [x] Настроить конфигурацию nginx
- [x] Настроить подключение к PostgreSQL

## 2. База данных
- [x] Создать Entity User (id, login, password, created_at)
- [x] Создать Entity Chat (id, user_id, created_at, updated_at)
- [x] Создать Entity Message (id, chat_id, role [user/assistant], content, created_at)
- [x] Выполнить миграции базы данных

## 3. Система авторизации
- [x] Настроить Symfony Security
- [x] Создать форму регистрации
- [x] Создать форму входа
- [x] Реализовать logout
- [x] Добавить валидацию данных пользователя

## 4. Интеграция с AI
- [x] Выбрать AI API (OpenAI, Anthropic и т.д.)
- [x] Создать сервис для работы с AI API
- [x] Настроить системный промпт для роли психолога
- [x] Реализовать обработку запросов и ответов
- [x] Добавить обработку ошибок API
- [x] Добавить adminer для работы с БД

## 5. Функционал чата
- [x] Создать контроллер чата
- [x] Реализовать создание новой сессии
- [x] Реализовать отправку сообщений
- [x] Реализовать получение истории чата
- [x] Добавить валидацию сообщений

## 6. Frontend
- [x] Создать базовый layout (templates/base.html.twig)
- [x] Создать страницу регистрации (templates/auth/register.html.twig)
- [x] Создать страницу входа (templates/auth/login.html.twig)
- [x] Создать главную страницу чата (templates/chat/index.html.twig)
- [x] Подключить Alpine.js
- [x] Реализовать интерактивный чат с Alpine.js
- [x] Создать стили для форм (public/css/auth.css)
- [x] Создать стили для чата (public/css/chat.css)
- [x] Добавить индикатор загрузки при ожидании ответа AI
- [x] Сделать бэкенд и фронтенд удаления чатов с подтверждение действия

## 7. Безопасность и оптимизация
- [ ] Настроить CSRF защиту
- [ ] Добавить rate limiting для запросов к AI
- [ ] Настроить права доступа (только авторизованные пользователи)
- [ ] Оптимизировать запросы к БД

## 8. Дополнительно
- [ ] Добавить возможность удаления истории чата
- [ ] Создать страницу профиля пользователя
- [ ] Добавить экспорт истории чата
- [ ] Написать документацию по развертыванию
